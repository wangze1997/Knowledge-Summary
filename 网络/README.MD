## 网络知识

### 从输入url地址到页面展示过程中都发生了什么?

- 先从浏览器缓存中查看,如果有相应资源直接取出
- 进行DNS解析拿到域名
- 进行TCP链接,确定双方都具有收发数据的能力
- 从服务器中取得相应资源
- 浏览器渲染引擎进行dom树解析和css树构建,拼成渲染树渲染页面。js引擎解析执行js代码,页面呈现在我们面前。

### 密码学基础

密码学有关的概念

- 明文：是指未加密过的数据

- 密文：是指加密过的数据

- 密钥：包括公钥与私钥，是指将密文转换成明文，或将明文转换成密文输入的参数。

- 对称加密：加密过程只涉及私钥，用私钥加密用私钥解密。常见的算法有MD5

- 非对称加密：加密过程既涉及公钥也涉及私钥，公钥任何人都可见，用公钥加密过的明文用私钥解密，用私钥加密过的明文用公钥解密。常见的算法有RSA、ECC

非对称加密与对称加密的区别

- 对称加密比较快，非对称加密比较慢
- 对称加密没非对称加密安全

### HTTPS与HTTP的区别

- 端口不同，HTTPS是443端口，HTTP是80端口
- HTTPS比较安全，它的数据经过传输层加密过。
- HTTPS需要安全证书，价格较高。

### HTTPS握手过程

https加密过程涉及2次http传输，即使用到对称加密，也使用到非对称加密。

- 客户端向服务器发送请求，连接到服务器的443端口
- 服务器有2个密钥即公钥和私钥，用来进行非对称加密
- 服务器将自己的公钥发送给客户端
- 客户端产生一个随机密钥，使用刚才发送过来的公钥对其进行非对称加密
- 客户端再次向服务器发送请求，将加密之后的客户端密钥发送给服务器
- 服务器使用自己的私钥对客户端密钥进行解密
- 服务器使用解密的客户端私钥对数据进行对称加密
- 客户端对服务器发送过来的数据，用自己的私钥对其进行对称解密，获得原始数据

### 强缓存与协商缓存

浏览器缓存是指浏览器请求一个页面时，将页面数据缓存到本地，当浏览器再次访问这个页面时，直接从本地缓存中拿取。可以减轻服务器的负担，加快客户端加载网页的时间。

![img](https://segmentfault.com/img/bVuuo2)

浏览器缓存主要分为强缓存还有协商缓存。

强缓存：浏览器请求某一资源时，先从本地缓存中查看是否有该资源的缓存，有的话查看缓存的头信息，根据header中的`Cache-Control`和`Expires`来判断是否过期。没过期的话直接从缓存中拿取资源渲染页面，过期的话则重新请求，这个过程没和服务器进行交互。

协商缓存：如果资源过期，则客户端重新向服务器发送请求，客户端会通过`If-None-Match`头将先前服务器端发送过来的Etag发送给服务器，服务器查看Etag是否与自己的相同，若相同，就将`If-None-Match`的值设为false，返回状态304，客户端继续使用本地缓存，若不相同就将`If-None-Match`的值设为true，返回状态为200，重新给客户端发送数据，协商缓存就是由服务器来确定缓存资源是否可用。

与缓存有关的字段。

- `Expires` 决定到期时间，绝对时间的GMT格式的时间字符串。
- `Cache-Control` 决定到期时间，相对时间。
- `If-None-Match` 就是一个校验码，决定是否启用协商缓存。
- `Etag` 保证资源的唯一性。

### DNS迭代查询

- 操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。
- 如果hosts中没有域名映射的话，就向本地DNS服务器查找
- 如果还没有的话，那么就去根域名服务器， 解析出com这个顶级域名
- 进而解析出2级，3级等域名，等查到最后一级域名时，就已经查出了相应的IP地址

